(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{117:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(41),i=n.n(c),o=n(38),s=n(43),u=n(14),d=n(191),l=n(193),j=n(190),m=n(187),p=n(185),h=n(179),b=(n(117),n(91)),f=n(21),O=n(189),x=n(192),v=n(186),y=Object(p.a)((function(){return Object(h.a)({header:{fontWeight:"bold",fontSize:40,textAlign:"center"},image:{maxWidth:"100%",maxHeight:"100%",display:"block",marginLeft:"auto",marginRight:"auto",width:"100%"},actions:{display:"flex",justifyContent:"space-evenly"},thumbUpIcon:{color:"green"},thumbDownIcon:{color:"red"},spanElement:{fontWeight:"bold",fontStyle:"italic"},title:{textAlign:"center",fontSize:"34px !important"},fadeOutLeft:{transform:"translateX(-100%)",opacity:0,backgroundColor:"green !important",transition:"all .5s !important"},fadeOutRight:{transform:"translateX(100%)",opacity:0,backgroundColor:"red !important",transition:"all .5s !important"},visible:{opacity:1,transition:"opacity .5s !important"}})})),g=n(40),C=n.n(g),T=n(64),w=function(){var e=Object(T.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://my-json-server.typicode.com/wojciechszutryk/jsonServer-for-TinderForMovies/","/recommendations/"),{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(T.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://my-json-server.typicode.com/wojciechszutryk/jsonServer-for-TinderForMovies/","/recommendations/").concat(t,"/accept/"),{method:"PUT",body:t,headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(T.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://my-json-server.typicode.com/wojciechszutryk/jsonServer-for-TinderForMovies/","/recommendations/").concat(t,"/reject/"),{method:"PUT",body:t,headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=n(89),N=n.n(E),k=n(90),L=n.n(k),R=n(4),M=function(e){var t=e.id,n=e.title,r=e.imageURL,c=e.summary,i=e.rating,s=e.finishRecommendation,u=Object(a.useState)("visible"),l=Object(f.a)(u,2),p=l[0],h=l[1],b=y(),g=Object(o.useMutation)(I),C=Object(o.useMutation)(S);var T=Object(a.useMemo)((function(){return"visible"===p?b.visible:"fadeOutLeft"===p?b.fadeOutLeft:"fadeOutRight"===p?b.fadeOutRight:void 0}),[p]);return Object(R.jsxs)(m.a,{className:T,children:[Object(R.jsxs)(O.a,{children:[Object(R.jsx)(j.a,{gutterBottom:!0,className:b.title,variant:"body1",children:n}),Object(R.jsx)(d.a,{children:Object(R.jsx)("img",{src:r,className:b.image,alt:"movie"})}),Object(R.jsxs)(j.a,{variant:"body2",gutterBottom:!0,children:[Object(R.jsx)("span",{className:b.spanElement,children:"Summary: "}),c]}),Object(R.jsxs)(j.a,{variant:"body2",gutterBottom:!0,children:[Object(R.jsx)("span",{className:b.spanElement,children:"Rating: "}),i]})]}),Object(R.jsxs)(x.a,{className:b.actions,children:[Object(R.jsx)(v.a,{size:"small",onClick:function(){h("fadeOutLeft"),setTimeout((function(){h("visible"),s(),g.mutate(t)}),600)},children:Object(R.jsx)(N.a,{className:b.thumbUpIcon})}),Object(R.jsx)(v.a,{size:"small",onClick:function(){h("fadeOutRight"),setTimeout((function(){h("visible"),s(),C.mutate(t)}),600)},children:Object(R.jsx)(L.a,{className:b.thumbDownIcon})})]})]})},A="SET_FINISHED_INDEXES",z="SET_ACTIVE_INDEX",F="SET_ALL_RECOMMENDATIONS",D=function(e){return{type:z,payload:e}},U=s.c,B=Object(p.a)((function(){return Object(h.a)({container:{display:"flex",justifyContent:"center",width:"100%",height:"80%",overflow:"hidden",paddingTop:20},messageCard:{display:"flex",alignItems:"center",justifyContent:"center",height:"70vh"},header:{textAlign:"center"}})}));var _=function(){var e=Object(s.b)(),t=B(),n=U((function(e){return e.finishedIndexes})),r=U((function(e){return e.activeIndex})),c=Object(o.useQuery)("recommendations",w,{onSuccess:function(t){e({type:F,payload:t}),e(D(t[0].id))}}),i=c.isLoading,p=c.error,h=c.data,f=Object(a.useMemo)((function(){return h&&r?h.find((function(e){return e.id===r})):null}),[r,h]),O=Object(a.useCallback)((function(){var t=Object(u.a)(n);t.push(f),e({type:A,payload:t});var a=h.map((function(e){return e.id})),r=h[a.indexOf(f.id)+1]?h[a.indexOf(f.id)+1].id:null;e(D(r))}),[n,f,e,h]);return i?Object(R.jsx)(b.ClipLoader,{size:150}):p?Object(R.jsxs)(d.a,{children:["An error has occurred: + ",p.message]}):Object(R.jsxs)(l.a,{maxWidth:"xs",children:[Object(R.jsx)(j.a,{variant:"h2",className:t.header,gutterBottom:!0,children:"Tinder for movies"}),r?Object(R.jsx)(d.a,{children:Object(R.jsx)(M,{id:f.id,title:f.title,imageURL:f.imageURL,summary:f.summary,rating:f.rating,finishRecommendation:O})}):Object(R.jsx)(d.a,{children:Object(R.jsx)(m.a,{className:t.messageCard,children:Object(R.jsx)(j.a,{children:"Sorry, no more recommendations available"})})})]})},P=n(51),W=n(33),X={finishedIndexes:[],allRecommendations:[],activeIndex:null},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(W.a)(Object(W.a)({},e),{},{allRecommendations:t.payload});case A:return Object(W.a)(Object(W.a)({},e),{},{finishedIndexes:t.payload});case z:return Object(W.a)(Object(W.a)({},e),{},{activeIndex:t.payload});default:return e}},H=n(92),J=n(93);var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=Object(P.createStore)(Q,e,Object(P.compose)(Object(P.applyMiddleware)(J.a),Object(H.devToolsEnhancer)({})));return t}(),q=V,G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,195)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},K=new o.QueryClient;i.a.render(Object(R.jsx)(s.a,{store:q,children:Object(R.jsx)(o.QueryClientProvider,{client:K,children:Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(_,{})})})}),document.getElementById("root")),G()}},[[149,1,2]]]);
//# sourceMappingURL=main.bfb32a2d.chunk.js.map